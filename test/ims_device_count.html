<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.min.js"></script>
    <script>
        function loadData() {

            var data = window.JAVADATA.getData();//执行java中的方法拿取data。

            var obj = JSON.parse(data);//解析json数据成对象
            //拿到数据后更新Option
            myChart.setOption({
                series: [{
                    name: '工单数量',
                    data: [1, 2, 4, 5, 6, 7, 8, 9, 10, 12, 12]
                    //data: [Number(obj.opjson[0].jobcount), Number(obj.opjson[1].jobcount), Number(obj.opjson[2].jobcount), Number(obj.opjson[3].jobcount), Number(obj.opjson[4].jobcount), Number(obj.opjson[5].jobcount), Number(obj.opjson[6].jobcount), Number(obj.opjson[7].jobcount), Number(obj.opjson[8].jobcount), Number(obj.opjson[9].jobcount), Number(obj.opjson[10].jobcount), Number(obj.opjson[11].jobcount)]
                }]
            });
        }
    </script>
</head>
<body onload="loadData()">
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width:100%"></div>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    // var myChart = echarts.init(document.getElementById('main'));
    var myChart = document.getElementById('main');//拿到布局
    //自适应宽高
    var myChartContainer = function () {
        myChart.style.width = window.innerWidth+'px';//等于该例显示浏览器窗口的高度和宽度：（不包括工具栏/滚动条）
        myChart.style.height = window.innerHeight+'px';
    };

    myChartContainer();//通过变量名调用匿名函数。
    var myChart = echarts.init(myChart);


    // 指定图表的配置项和数据
    option = {
        tooltip: {
            trigger: 'item',
            formatter: "{a} <br/>{b}: {c} ({d}%)"
        },
        legend: {
            orient: 'vertical',
            x: 'left',
            data:['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']
        },
        series: [
            {
                name:'访问来源',
                type:'pie',
                radius: ['50%', '70%'],
                avoidLabelOverlap: false,
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '20',
                            fontWeight: 'bold'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    }
                },
                data:[
                    {value:335, name:'直接访问'},
                    {value:310, name:'邮件营销'},
                    {value:234, name:'联盟广告'},
                    {value:135, name:'视频广告'},
                    {value:1548, name:'搜索引擎'}
                ]
            }
        ]
    };
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);


</script>
</body>
</html>